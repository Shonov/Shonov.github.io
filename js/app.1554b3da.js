(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],f=0,p=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var i={},n={app:0},a=[];function s(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=i,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"27dc":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var i=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],s={name:"App"},o=s,c=r("2877"),l=Object(c["a"])(o,n,a,!1,null,null,null),u=l.exports,f=r("8c4f"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("h1",{staticClass:"home__title"},[t._v("Каталог фильмов")]),r("div",{staticClass:"search"},[r("i",{staticClass:"search__icon fa fa-search"}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search__field",attrs:{type:"text",placeholder:"Введите  название"},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.filteredFilms]}})]),r("div",{staticClass:"home__films"},[t.isLoaded?t._l(t.films,(function(e){return r("div",{staticClass:"film"},[r("img",{staticClass:"film__poster",attrs:{src:e.poster}}),r("div",{staticClass:"film__description"},[r("div",{staticClass:"film__name"},[t._v(t._s(e.title))]),r("div",{staticClass:"film__producer"},[t._v(t._s(e.producer))])])])})):r("i",{staticClass:"loader fa fa-spinner fa-spin"})],2),t.hideButton||!t.isLoaded||t.searchFailed?t.searchFailed?r("div",{staticClass:"failed-search"},[t._v("К сожалению, поиск по сайту не дал никаких результатов.")]):t._e():r("div",{staticClass:"more-films",on:{click:t.nextPage}},[t._v("Показать еще")])])},d=[],h=(r("8e6e"),r("ac6a"),r("456d"),r("386d"),r("bd86")),m=r("2f62");function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(r,!0).forEach((function(e){Object(h["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _={name:"Home",data:function(){return{size:3,page:1,hideButton:!1,films:!1,search:"",searchFailed:!1}},computed:b({},Object(m["b"])({filmsData:"films/allFilms",isLoaded:"films/isLoaded"})),watch:{filmsData:function(){this.films=this.basicCountFilms()}},created:function(){this.$store.dispatch("films/getAllFilms")},methods:{basicCountFilms:function(){return this.filmsData.slice(0,this.page*this.size)},nextPage:function(){this.page++,this.films=this.basicCountFilms(),this.page*this.size>=this.filmsData.length&&(this.hideButton=!0)},filteredFilms:function(){var t=this;this.films=this.filmsData.filter((function(e){return e.title.toLowerCase().indexOf(t.search.toLowerCase())>=0})),0===this.films.length?this.searchFailed=!0:this.searchFailed=!1,""===this.search&&(this.films=this.basicCountFilms())}}},g=_,O=Object(c["a"])(g,p,d,!1,null,null,null),y=O.exports;i["a"].use(f["a"]);var w=new f["a"]({routes:[{path:"/",name:"home",component:y}]}),P=r("bc3a"),j=r.n(P),E=(r("96cf"),r("3b8d")),T={namespaced:!0,state:{all:[],isLoaded:!1,error:!1},getters:{allFilms:function(t){return t.all},isLoaded:function(t){return t.isLoaded}},mutations:{FILMS_UPDATED:function(t,e){t.all.push(e)},IS_LOADED_UPDATED:function(t,e){t.isLoaded=e},STATE_RESET:function(t){t.all=[],t.isLoaded=!1},SET_ERROR:function(t,e){t.error=e}},actions:{getAllFilms:function(t){var e=t.commit,r=t.rootGetters,i=t.dispatch;e("STATE_RESET"),r.HTTP.get("https://swapi.co/api/films/").then(function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i("updateFilmPoster",e.data.results);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){e("SET_ERROR",t)}))},updateFilmPoster:function(){var t=Object(E["a"])(regeneratorRuntime.mark((function t(e,r){var i,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e.commit,n=e.rootGetters,a="https://placehold.it/260x85?text=Placeholder",s=function(t){return n.HTTP.get("https://pixabay.com/api/",{params:{key:"13946176-5efe0deaabd8f5d7a020a0ba7",q:t.title}}).then((function(e){t.poster=e.data.totalHits?e.data.hits[0].webformatURL:a,i("FILMS_UPDATED",t)}),(function(t){i("SET_ERROR",t)})),t},r.map(s),i("IS_LOADED_UPDATED",!0);case 5:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()}};i["a"].use(m["a"]);var D=new m["a"].Store({modules:{films:T},getters:{HTTP:function(){return j.a}},state:{},mutations:{},actions:{}});r("27dc");i["a"].config.productionTip=!1,new i["a"]({router:w,store:D,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.1554b3da.js.map